plugins {
    id 'java'
    id 'application'
}

targetCompatibility = '1.9'

repositories {
    jcenter()
}

dependencies {
    implementation project(':tale')

    runtimeOnly project(':pigs')
    runtimeOnly project(':bears')
}

mainClassName = 'org.gradle.fairy.app.StoryTeller'

compileJava {
    destinationDir = file("build/mods")
    options.compilerArgs = [
        '--module-path', classpath.asPath,
        '--module-source-path', sourceSets.main.java.srcDirs.join(System.getProperty('path.separator')),
        '-m', 'org.gradle.fairy.app',
    ]
    doLast {
      copy {
        from file(new File(destinationDir,  'org.gradle.fairy.app'))
        into sourceSets.main.java.outputDir.absolutePath
      }
    }
}
